<!DOCTYPE html>
<html>
<head>
    <title>Iframe Debug Test</title>
</head>
<body>
    <h1>Iframe Communication Debug</h1>
    <div id="status">Loading...</div>
    
    <iframe 
        id="testIframe"
        src="https://www.xingyunlink.com/chat/share?shareId=xs4443zwclnh7uelttdtg7z6"
        style="width: 100%; height: 500px; border: 1px solid #ccc;"
        allow="microphone"
    ></iframe>

    <script>
        console.log('=== Iframe Debug Test Started ===');
        
        const iframe = document.getElementById('testIframe');
        const status = document.getElementById('status');
        
        // iframeåŠ è½½äº‹ä»¶
        iframe.onload = function() {
            console.log('âœ… Iframe loaded successfully');
            status.innerHTML = 'âœ… Iframe loaded';
        };
        
        iframe.onerror = function() {
            console.log('âŒ Iframe failed to load');
            status.innerHTML = 'âŒ Iframe failed to load';
        };
        
        // ç›‘å¬è·¨åŸŸæ¶ˆæ¯
        window.addEventListener('message', function(event) {
            console.log('ðŸ“¨ Received message from iframe:', event);
            console.log('Origin:', event.origin);
            console.log('Data:', event.data);
            console.log('Source:', event.source);
        });
        
        // ç›‘å¬ç½‘ç»œé”™è¯¯
        window.addEventListener('error', function(event) {
            console.log('ðŸš« Global error:', event);
        });
        
        // å®šæœŸæ£€æŸ¥iframeå†…å®¹
        setInterval(() => {
            try {
                console.log('ðŸ” Iframe document:', iframe.contentDocument);
                console.log('ðŸ” Iframe window:', iframe.contentWindow);
            } catch (e) {
                console.log('âš ï¸ Cannot access iframe content (CORS):', e.message);
            }
        }, 5000);
        
        setTimeout(() => {
            console.log('ðŸ“Š 5 seconds status check:');
            console.log('- Iframe src:', iframe.src);
            console.log('- Iframe ready state:', iframe.readyState);
            console.log('- Window location:', window.location.href);
        }, 5000);
    </script>
</body>
</html>
